/*! CCL - v0.1.0
 * http://github.com/ObjectiveSubject/ccl
 * Copyright (c) 2017; * Licensed GPLv2+ */
!function(t,i){"use strict";var e=i.document;i.CCL||(i.CCL={}),CCL.DURATION=300,CCL.BREAKPOINT_SM=500,CCL.BREAKPOINT_MD=768,CCL.BREAKPOINT_LG=1e3,CCL.BREAKPOINT_XL=1500,t(e).ready(function(){t("html").toggleClass("no-js js")})}(jQuery,this),function(){window.CCL||(window.CCL={}),CCL.reflow=function(t){return t.offsetHeight}}(),function(t,i){"use strict";function e(){var t=o.createElement("div");i(t).css({width:"100px",height:"100px",overflow:"scroll",position:"absolute",top:"-9999px"}),i("body").append(t);var e=t.offsetWidth-t.clientWidth;return i(t).remove(),e}var o=t.document;t.CCL||(t.CCL={}),CCL.getScrollWidth=e,CCL.SCROLLBARWIDTH=e()}(this,jQuery),function(t){var i=function(t,i,e){var o,s,n,c,a=0;e||(e={});var l=function(){a=!1===e.leading?0:(new Date).getTime(),o=null,c=t.apply(s,n),o||(s=n=null)},r=function(){var r=(new Date).getTime();a||!1!==e.leading||(a=r);var u=i-(r-a);return s=this,n=arguments,u<=0||u>i?(o&&(clearTimeout(o),o=null),a=r,c=t.apply(s,n),o||(s=n=null)):o||!1===e.trailing||(o=setTimeout(l,u)),c};return r.cancel=function(){clearTimeout(o),a=0,o=s=n=null},r};t.CCL||(t.CCL={}),t.CCL.throttle=i}(this),function(t,i){"use strict";var e=t.document,o=function(t){this.$el=i(t),this.$toggle=this.$el.children(".ccl-c-accordion__toggle"),this.$content=this.$el.children(".ccl-c-accordion__content"),this.init()};o.prototype.init=function(){var t=this;this.$toggle.on("click",function(i){i.preventDefault(),t.$content.slideToggle(),t.$el.toggleClass("ccl-is-open")})},i(e).ready(function(){i(".ccl-c-accordion").each(function(){new o(this)})})}(this,jQuery),function(t,i){"use strict";var e=t.document,o=CCL.DURATION,s=function(t){this.$el=t,this.target=t.parent(),this.$target=i(this.target),this.init()};s.prototype.init=function(){var t=this;t.$target.animate({opacity:0},{duration:o,complete:function(){t.$target.slideUp(o,function(){t.$target.remove()})}})},i(e).ready(function(){i(e).on("click",'[data-dismiss="alert"]',function(t){var e=i(t.target).closest('[data-dismiss="alert"]');new s(e)})})}(this,jQuery),function(t,i){"use strict";var e=t.document,o=function(t){this.$el=i(t),this.globalDefaults={mobileFirst:!0,dotsClass:"ccl-c-carousel__paging",infinite:!1,dots:!0,slidesToScroll:1,variableWidth:!0},this.init()};o.prototype.init=function(){var t=this.$el.data(),e=t.options||{};e.responsive=[],t.optionsSm&&e.responsive.push({breakpoint:CCL.BREAKPOINT_SM,settings:t.optionsSm}),t.optionsMd&&e.responsive.push({breakpoint:CCL.BREAKPOINT_MD,settings:t.optionsMd}),t.optionsLg&&e.responsive.push({breakpoint:CCL.BREAKPOINT_LG,settings:t.optionsLg}),t.optionsXl&&e.responsive.push({breakpoint:CCL.BREAKPOINT_XL,settings:t.optionsXl}),e=i.extend(this.globalDefaults,e);var o=this.$el.slick(e),s=this;o.on("beforeChange",function(t,i,e,o){s.$el.find(".slick-slide").removeClass("ccl-is-past"),s.$el.find('.slick-slide[data-slick-index="'+o+'"]').prevAll().addClass("ccl-is-past")})},i(e).ready(function(){i(".js-promo-carousel").each(function(){new o(this)})})}(this,jQuery),function(t,i){"use strict";function e(){i(".ccl-c-dropdown, .ccl-c-dropdown__menu").removeClass(n.ACTIVE),i(s.TOGGLE).attr("aria-expanded","false")}var o=t.document,s={TOGGLE:'[data-toggle="dropdown"]'},n={ACTIVE:"ccl-is-active",MENU:"ccl-c-dropdown__menu"},c=function(t){this.$toggle=i(t),this.$parent=this.$toggle.parent();var e=this.$toggle.data("target");this.$menu=i(e),this.init()};c.prototype.init=function(){var t=this;this.$toggle.click(function(i){i.preventDefault(),i.stopPropagation(),t.toggle()}),i(o).on("click",function(t){i("."+n.MENU+"."+n.ACTIVE).length&&e()})},c.prototype.toggle=function(){this.$toggle.hasClass(n.ACTIVE)||this.showMenu()},c.prototype.showMenu=function(){this.$toggle.attr("aria-expanded","true"),this.$menu.addClass(n.ACTIVE),this.$parent.addClass(n.ACTIVE)},c.prototype.hideMenu=function(){this.$toggle.attr("aria-expanded","false"),this.$menu.removeClass(n.ACTIVE),this.$parent.removeClass(n.ACTIVE)},i(o).ready(function(){i(s.TOGGLE).each(function(){new c(this)})})}(this,jQuery),function(t,i){"use strict";var e=t.document,o=function(t){var e=i(t);this.$el=i(t),this.target=e.data("target"),this.$target=i(this.target),this.init()};o.prototype.init=function(){var t=this;t.$el.on("click",function(o){o.preventDefault(),i(e.body).hasClass("ccl-modal-open")?t.closeModal():t.showBackdrop(function(){t.showModal()})})},o.prototype.showBackdrop=function(t){var o=e.createElement("div"),s=i(o);s.addClass("ccl-c-modal__backdrop"),s.appendTo(e.body),CCL.reflow(o),s.addClass("ccl-is-shown"),i(e.body).addClass("ccl-modal-open").css("padding-right",CCL.SCROLLBARWIDTH),t&&setTimeout(t,300)},o.prototype.showModal=function(){var t=this;t.$target.show(0,function(){t.$target.addClass("ccl-is-shown")})},o.prototype.closeModal=function(){i(".ccl-c-modal").removeClass("ccl-is-shown"),setTimeout(function(){i(".ccl-c-modal").hide(),i(".ccl-c-modal__backdrop").removeClass("ccl-is-shown"),setTimeout(function(){i(".ccl-c-modal__backdrop").remove(),i(e.body).removeClass("ccl-modal-open").css("padding-right","")},300)},300)},i(e).ready(function(){i('[data-toggle="modal"]').each(function(){new o(this)})})}(this,jQuery),function(t,i){"use strict";var e=t.document,o=function(t){this.$el=i(t);var e=this;this.$el.submit(function(t){t.preventDefault(),console.log("form-submitted",e.$el.serializeArray())})};i(e).ready(function(){i(".js-room-res-form").each(function(){new o(this)})})}(this,jQuery),function(t,i){"use strict";var e=t.document,o=i(t),s={isFixed:"ccl-is-fixed"},n=function(t){function e(){o.scrollTop()+l.offset>=a.top?n.addClass(s.isFixed):n.removeClass(s.isFixed)}var n=i(t),c=n.outerHeight(),a=n.offset(),l=n.data("sticky"),r=i('<div class="js-sticky-wrapper"></div>').css({height:c+"px"}),u={offset:0};return l=i.extend(u,l),n.wrap(r),o.scroll(CCL.throttle(e,100)),this};i(e).ready(function(){i(".js-is-sticky").each(function(){new n(this)})})}(this,jQuery),function(t,i){"use strict";var e=t.document,o=i("html").data("school"),s=function(t){this.$select=i(t),this.init()};s.prototype.init=function(){o&&this.$select.find('option[value="'+o+'"]').attr("selected","selected"),this.$select.change(function(t){i("html").attr("data-school",t.target.value)})},i(e).ready(function(){i('[data-toggle="school"]').each(function(){new s(this)})})}(this,jQuery),function(t,i){"use strict";var e=t.document,o=function(t){this.$el=i(t),this.content=this.$el.attr("title"),this.$tooltip=i('<div id="ccl-current-tooltip" class="ccl-c-tooltip ccl-is-top" role="tooltip"><div class="ccl-c-tooltip__arrow"></div><div class="ccl-c-tooltip__inner">'+this.content+"</div></div>"),this.init()};o.prototype.init=function(){var t=this;this.$el.hover(function(i){t.$el.attr("title",""),t.$el.attr("aria-describedby","ccl-current-tooltip"),t.$tooltip.appendTo(e.body),CCL.reflow(t.$tooltip[0]);var o=t.$el.offset(),s=t.$el.outerWidth(),n=t.$tooltip.outerHeight();t.$tooltip.css({top:o.top-n+"px",left:o.left+s/2+"px"}),t.$tooltip.addClass("ccl-is-shown")},function(i){t.$el.attr("title",t.content),t.$el.attr("aria-describedby",""),t.$tooltip.removeClass("ccl-is-shown"),t.$tooltip.remove()})},i(e).ready(function(){i('[data-toggle="tooltip"]').each(function(){new o(this)})})}(this,jQuery),function(t,i){"use strict";var e,o,s=t.document,n=function(t){var e=this;return this.$el=i(t),this.$tabs=this.$el.find(".ccl-c-tab"),this.$tabContents=i(".ccl-c-tab__content"),this.$tabs.each(function(){var t=i(this);t.click(function(i){i.preventDefault();var o=t.data("target");e.setActive(o)})}),this};n.prototype.setActive=function(t){this.$tabs.removeClass("ccl-is-active"),this.$tabs.filter('[href="'+t+'"]').addClass("ccl-is-active"),this.$tabContents.removeClass("ccl-is-active"),this.$tabContents.filter(t).addClass("ccl-is-active")};var c=function(t){this.$el=i(t),this.callNumbers={},this.$form=this.$el.find("#call-number-search"),this.$input=this.$el.find("#call-num-input"),this.$submit=this.$el.find("#call-num-submit"),this.$marquee=this.$el.find(".ccl-c-wayfinder__marquee"),this.$callNum=this.$el.find(".ccl-c-wayfinder__call-num"),this.$wing=this.$el.find(".ccl-c-wayfinder__wing"),this.$floor=this.$el.find(".ccl-c-wayfinder__floor"),this.$subject=this.$el.find(".ccl-c-wayfinder__subject"),this.error={get:'<div class="ccl-c-alert ccl-is-error ccl-wayfinder__error"><button type="button" class="ccl-b-close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">×</span></button><i class="ccl-b-icon-alert" aria-hidden="true"></i> There was an error fetching call numbers.</div>',find:'<div class="ccl-c-alert ccl-is-error ccl-wayfinder__error"><button type="button" class="ccl-b-close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">×</span></button><i class="ccl-b-icon-alert" aria-hidden="true"></i> Could not find that call number. Please try again.</div>'},this.$errorBox=i(".ccl-error-box");var e=this;return i.getJSON(CCL.assets+"js/call-numbers.json").done(function(t){e.callNumbers=t,e.init()}).fail(function(t){console.log(t),this.$errorBox.append(this.error.get)}),this};c.prototype.init=function(){var t=this;this.$el.addClass("ccl-app-active"),this.$input.keyup(function(){""===i(this).val()?(t.$submit.attr("disabled",!0),t.$marquee.hide(),t.reset()):t.$submit.attr("disabled",!1)}),this.$form.submit(function(e){e.preventDefault();var o=t.$input.val();i(".ccl-wayfinder__error").remove(),t.$marquee.show(),t.$callNum.text(o),t.findRoom(o)})},c.prototype.getCallKey=function(t){var i,e=Object.keys(this.callNumbers);if(0!==e.length)return e.forEach(function(e){t>=e&&(i=e)}),i},c.prototype.findRoom=function(t){t=t.toUpperCase();var o,s=this.getCallKey(t),n={};if(!s)return void this.throwFindError();i("html, body").animate({scrollTop:i(".ccl-c-search").offset().top}),n=this.callNumbers[s],this.$floor.text(n.floor),this.$wing.text(n.wing),this.$subject.text(n.subject),o=n.floor_int,this.$el.find('a[href="#floor-'+o+'"]').addClass("ccl-is-active"),this.$el.find("#room-"+o+"-1").addClass("ccl-is-active"),e.setActive("#floor-"+o)},c.prototype.reset=function(){this.$el.find('a[href*="#floor-"]').removeClass("ccl-is-active"),this.$el.find(".ccl-c-floor__room").removeClass("ccl-is-active")},c.prototype.throwFindError=function(){this.$el.find('a[href*="#floor-"]').removeClass("ccl-is-active"),this.$el.find(".ccl-c-floor__room").removeClass("ccl-is-active"),this.$floor.text(""),this.$wing.text(""),this.$subject.text(""),this.$errorBox.append(this.error.find)},i(s).ready(function(){i(".ccl-js-tabs").each(function(){e=new n(this)}),i(".ccl-js-wayfinder").each(function(){o=new c(this)})})}(this,jQuery);