/*! CCL - v0.1.0
 * http://github.com/ObjectiveSubject/ccl
 * Copyright (c) 2017; * Licensed GPLv2+ */
!function(t,e){"use strict";var o=e.document;e.CCL||(e.CCL={}),CCL.DURATION=300,CCL.BREAKPOINT_SM=500,CCL.BREAKPOINT_MD=768,CCL.BREAKPOINT_LG=1e3,CCL.BREAKPOINT_XL=1500,t(o).ready(function(){t("html").toggleClass("no-js js")})}(jQuery,this),function(){window.CCL||(window.CCL={}),CCL.reflow=function(t){return t.offsetHeight}}(),function(t,e){"use strict";function o(){var t=i.createElement("div");e(t).css({width:"100px",height:"100px",overflow:"scroll",position:"absolute",top:"-9999px"}),e("body").append(t);var o=t.offsetWidth-t.clientWidth;return e(t).remove(),o}var i=t.document;t.CCL||(t.CCL={}),CCL.getScrollWidth=o,CCL.SCROLLBARWIDTH=o()}(this,jQuery),function(t){var e=function(t,e,o){var i,s,n,c,l=0;o||(o={});var a=function(){l=!1===o.leading?0:(new Date).getTime(),i=null,c=t.apply(s,n),i||(s=n=null)},r=function(){var r=(new Date).getTime();l||!1!==o.leading||(l=r);var h=e-(r-l);return s=this,n=arguments,h<=0||h>e?(i&&(clearTimeout(i),i=null),l=r,c=t.apply(s,n),i||(s=n=null)):i||!1===o.trailing||(i=setTimeout(a,h)),c};return r.cancel=function(){clearTimeout(i),l=0,i=s=n=null},r};t.CCL||(t.CCL={}),t.CCL.throttle=e}(this),function(t,e){"use strict";var o=t.document,i=function(t){this.$el=e(t),this.$toggle=this.$el.children(".ccl-c-accordion__toggle"),this.$content=this.$el.children(".ccl-c-accordion__content"),this.init()};i.prototype.init=function(){var t=this;this.$toggle.on("click",function(e){e.preventDefault(),t.$content.slideToggle(),t.$el.toggleClass("ccl-is-open")})},e(o).ready(function(){e(".ccl-c-accordion").each(function(){new i(this)})})}(this,jQuery),function(t,e){"use strict";var o=t.document,i=CCL.DURATION,s=function(t){this.$el=t,this.target=t.parent(),this.$target=e(this.target),this.init()};s.prototype.init=function(){var t=this;t.$target.animate({opacity:0},{duration:i,complete:function(){t.$target.slideUp(i,function(){t.$target.remove()})}})},e(o).ready(function(){e(o).on("click",'[data-dismiss="alert"]',function(t){var o=e(t.target).closest('[data-dismiss="alert"]');new s(o)})})}(this,jQuery),function(t,e){"use strict";var o=t.document,i=function(t){this.$el=e(t),this.globalDefaults={mobileFirst:!0,dotsClass:"ccl-c-carousel__paging",infinite:!1,dots:!0,slidesToScroll:1,variableWidth:!0},this.init()};i.prototype.init=function(){var t=this.$el.data(),o=t.options||{};o.responsive=[],t.optionsSm&&o.responsive.push({breakpoint:CCL.BREAKPOINT_SM,settings:t.optionsSm}),t.optionsMd&&o.responsive.push({breakpoint:CCL.BREAKPOINT_MD,settings:t.optionsMd}),t.optionsLg&&o.responsive.push({breakpoint:CCL.BREAKPOINT_LG,settings:t.optionsLg}),t.optionsXl&&o.responsive.push({breakpoint:CCL.BREAKPOINT_XL,settings:t.optionsXl}),o=e.extend(this.globalDefaults,o);var i=this.$el.slick(o),s=this;i.on("beforeChange",function(t,e,o,i){s.$el.find(".slick-slide").removeClass("ccl-is-past"),s.$el.find('.slick-slide[data-slick-index="'+i+'"]').prevAll().addClass("ccl-is-past")})},e(o).ready(function(){e(".js-promo-carousel").each(function(){new i(this)})})}(this,jQuery),function(t,e){"use strict";function o(){e(".ccl-c-dropdown, .ccl-c-dropdown__menu").removeClass(n.ACTIVE),e(s.TOGGLE).attr("aria-expanded","false")}var i=t.document,s={TOGGLE:'[data-toggle="dropdown"]'},n={ACTIVE:"ccl-is-active",MENU:"ccl-c-dropdown__menu"},c=function(t){this.$toggle=e(t),this.$parent=this.$toggle.parent();var o=this.$toggle.data("target");this.$menu=e(o),this.init()};c.prototype.init=function(){var t=this;this.$toggle.click(function(e){e.preventDefault(),e.stopPropagation(),t.toggle()}),e(i).on("click",function(t){e("."+n.MENU+"."+n.ACTIVE).length&&o()})},c.prototype.toggle=function(){this.$toggle.hasClass(n.ACTIVE)||this.showMenu()},c.prototype.showMenu=function(){this.$toggle.attr("aria-expanded","true"),this.$menu.addClass(n.ACTIVE),this.$parent.addClass(n.ACTIVE)},c.prototype.hideMenu=function(){this.$toggle.attr("aria-expanded","false"),this.$menu.removeClass(n.ACTIVE),this.$parent.removeClass(n.ACTIVE)},e(i).ready(function(){e(s.TOGGLE).each(function(){new c(this)})})}(this,jQuery),function(t,e){"use strict";var o=t.document,i=function(t){var o=e(t);this.$el=e(t),this.target=o.data("target"),this.$target=e(this.target),this.init()};i.prototype.init=function(){var t=this;t.$el.on("click",function(i){i.preventDefault(),e(o.body).hasClass("ccl-modal-open")?t.closeModal():t.showBackdrop(function(){t.showModal()})})},i.prototype.showBackdrop=function(t){var i=o.createElement("div"),s=e(i);s.addClass("ccl-c-modal__backdrop"),s.appendTo(o.body),CCL.reflow(i),s.addClass("ccl-is-shown"),e(o.body).addClass("ccl-modal-open").css("padding-right",CCL.SCROLLBARWIDTH),t&&setTimeout(t,300)},i.prototype.showModal=function(){var t=this;t.$target.show(0,function(){t.$target.addClass("ccl-is-shown")})},i.prototype.closeModal=function(){e(".ccl-c-modal").removeClass("ccl-is-shown"),setTimeout(function(){e(".ccl-c-modal").hide(),e(".ccl-c-modal__backdrop").removeClass("ccl-is-shown"),setTimeout(function(){e(".ccl-c-modal__backdrop").remove(),e(o.body).removeClass("ccl-modal-open").css("padding-right","")},300)},300)},e(o).ready(function(){e('[data-toggle="modal"]').each(function(){new i(this)})})}(this,jQuery),function(t,e){"use strict";var o=t.document,i=[{id:9148,name:"Group Study 1",description:"",image:"",capacity:"6",availability:[{from:"2017-10-20T08:00:00-07:00",to:"2017-10-20T08:30:00-07:00"},{from:"2017-10-20T08:30:00-07:00",to:"2017-10-20T09:00:00-07:00"},{from:"2017-10-20T09:00:00-07:00",to:"2017-10-20T09:30:00-07:00"},{from:"2017-10-20T09:30:00-07:00",to:"2017-10-20T10:00:00-07:00"},{from:"2017-10-20T10:00:00-07:00",to:"2017-10-20T10:30:00-07:00"},{from:"2017-10-20T10:30:00-07:00",to:"2017-10-20T11:00:00-07:00"},{from:"2017-10-20T11:30:00-07:00",to:"2017-10-20T12:00:00-07:00"},{from:"2017-10-20T12:30:00-07:00",to:"2017-10-20T13:00:00-07:00"},{from:"2017-10-20T13:00:00-07:00",to:"2017-10-20T13:30:00-07:00"},{from:"2017-10-20T14:30:00-07:00",to:"2017-10-20T15:00:00-07:00"},{from:"2017-10-20T15:00:00-07:00",to:"2017-10-20T15:30:00-07:00"},{from:"2017-10-20T15:30:00-07:00",to:"2017-10-20T16:00:00-07:00"},{from:"2017-10-20T16:00:00-07:00",to:"2017-10-20T16:30:00-07:00"},{from:"2017-10-20T16:30:00-07:00",to:"2017-10-20T17:00:00-07:00"},{from:"2017-10-20T17:00:00-07:00",to:"2017-10-20T17:30:00-07:00"},{from:"2017-10-20T17:30:00-07:00",to:"2017-10-20T18:00:00-07:00"},{from:"2017-10-20T18:00:00-07:00",to:"2017-10-20T18:30:00-07:00"},{from:"2017-10-20T18:30:00-07:00",to:"2017-10-20T19:00:00-07:00"},{from:"2017-10-20T19:00:00-07:00",to:"2017-10-20T19:30:00-07:00"},{from:"2017-10-20T19:30:00-07:00",to:"2017-10-20T20:00:00-07:00"},{from:"2017-10-20T20:00:00-07:00",to:"2017-10-20T20:30:00-07:00"},{from:"2017-10-20T20:30:00-07:00",to:"2017-10-20T21:00:00-07:00"},{from:"2017-10-20T21:00:00-07:00",to:"2017-10-20T21:30:00-07:00"},{from:"2017-10-20T21:30:00-07:00",to:"2017-10-20T22:00:00-07:00"}]}],s=function(t){var o=new Date;this.$el=e(t),this.$formContent=this.$el.find(".js-room-res-form-content").css({position:"relative"}),this.$formResponse=this.$el.find(".js-room-res-form-response").css({position:"absolute",top:"1rem",left:"1rem",opacity:0}),this.$formCancel=this.$el.find(".js-room-res-form-cancel"),this.$formSubmit=this.$el.find(".js-room-res-form-submit"),this.roomId=this.$el.data("resource-id"),this.$dateSelect=this.$el.find(".js-room-date-select"),this.dateYmd=this.$dateSelect.val(),this.$roomSchedule=this.$el.find(".js-room-schedule"),this.$currentDurationText=this.$el.find(".js-current-duration"),this.$resetSelectionBtn=this.$el.find(".js-reset-selection"),this.$roomSlotInputs=null,this.selectedSlotInputs=[],this.lastSelectedSlot=!1,this.maxSlots=4,this.$maxTime=this.$el.find(".js-max-time"),this.slotMinutes=30,this.timeZone="-700",this.openTime=new Date(o.getFullYear(),o.getMonth(),o.getDate(),8),this.closeTime=new Date(o.getFullYear(),o.getMonth(),o.getDate(),17);this.init()};s.prototype.init=function(){var t=this,e=(new Date).toISOString().split("T")[0];this.$el.addClass("ccl-is-loading"),this.setMaxTimeText(),this.getSpaceAvailability(e).done(function(e){e=i,t.makeSchedule(e)}).fail(function(t){console.log(t)}).always(function(){t.$el.removeClass("ccl-is-loading")}),this.initDateEvents(),this.initFormEvents()},s.prototype.getSpaceAvailability=function(t){return e.get({url:"#",data:{availability:t}})},s.prototype.makeSchedule=function(t){t=t[0];var o,i=this,s=[];t.availability;e(t.availability).each(function(t,e){var n=e.from,c=new Date(e.from);if(o&&o!=n){var l,a=new Date(n).getTime(),r=new Date(o).getTime(),h=a-r;h=h/1e3/60,l=h/i.slotMinutes;for(var u=0;u<l;u++){var d=u*i.slotMinutes*60*1e3,p=r+d;s.push(i.makeTimeSlot({id:"slot-"+i.roomId+"-"+t+"-"+u,disabled:"disabled",class:"ccl-is-occupied",value:i.formatDateString(new Date(p)),timeString:i.formatDateString(new Date(p),"readable")}))}}s.push(i.makeTimeSlot({id:"slot-"+i.roomId+"-"+t,value:i.formatDateString(c),timeString:i.formatDateString(c,"readable")})),o=e.to}),this.selectedSlotInputs=[],this.$roomSchedule.html(s.join("")),this.$roomSlotInputs=this.$el.find('.ccl-c-room__slot [type="checkbox"]'),this.setCurrentDurationText(),this.initSlotEvents()},s.prototype.makeTimeSlot=function(t){if(!t||"object"!=typeof t)return"";var o={class:"",id:"",disabled:"",value:"",timeString:""};return t=e.extend(o,t),'<div class="ccl-c-room__slot '+t.class+'"><input type="checkbox" id="'+t.id+'" name="'+t.id+'" value="'+t.value+'" '+t.disabled+'/><label class="ccl-c-room__slot-label" for="'+t.id+'">'+t.timeString+"</label></div>"},s.prototype.initFormEvents=function(){var t=this;this.$resetSelectionBtn.click(function(o){o.preventDefault(),e(t.selectedSlotInputs).each(function(t,o){e(o).prop("checked",!1).change()}),e(".ccl-c-room__slot").removeClass("ccl-is-disabled ccl-has-potential")}),this.$el.submit(function(e){e.preventDefault(),t.onSubmit()})},s.prototype.initDateEvents=function(){var t=this;this.$dateSelect.change(function(){t.onDateChange()})},s.prototype.onDateChange=function(){var t=this;this.dateYmd=this.$dateSelect.val(),this.$el.removeClass("ccl-is-loading"),this.getSpaceAvailability(this.dateYmd).done(function(e){e=i,t.makeSchedule(e)}).fail(function(t){console.log(t)}).always(function(){t.$el.removeClass("ccl-is-loading"),t.$resetSelectionBtn.hide()})},s.prototype.initSlotEvents=function(){var t=this;this.$roomSlotInputs&&this.$roomSlotInputs.length&&(this.$el.find(".ccl-c-room__slot").hover(function(){t.onSlotMouseIn(this)},function(){t.onSlotMouseOut(this)}),this.$roomSlotInputs.click(function(e){var o=this;t.onSlotClick(o,e)}),this.$roomSlotInputs.change(function(){var e=this;t.onSlotChange(e)}))},s.prototype.onSlotMouseIn=function(t){if(1===this.selectedSlotInputs.length){var o=e(t).find('[type="checkbox"]'),i=this.$roomSlotInputs.index(o),s=this.$roomSlotInputs.index(this.selectedSlotInputs[0]),n=[i,s].sort();if(n[0]!==n[1]&&!(n[0]<=s-this.maxSlots||n[1]>=s+this.maxSlots)){var c=this.$roomSlotInputs.eq(n[0]).parent(".ccl-c-room__slot"),l=this.$roomSlotInputs.eq(n[1]).parent(".ccl-c-room__slot");c.nextUntil(l).each(function(){var t=e(this);t.hasClass("ccl-is-disabled")||t.addClass("ccl-has-potential")})}}},s.prototype.onSlotMouseOut=function(t){1===this.selectedSlotInputs.length&&e(".ccl-c-room__slot").removeClass("ccl-has-potential")},s.prototype.onSlotClick=function(t,o){function i(){e(".ccl-c-room__slot.ccl-is-occupied").each(function(t,o){var i=e(o).find('[type="checkbox"]'),a=s.$roomSlotInputs.index(i);c<a&&a<l&&(a<n&&(c=a),a>n&&(l=a))}),s.$roomSlotInputs.each(function(t,o){(t<=c||t>=l)&&e(o).parent(".ccl-c-room__slot").addClass("ccl-is-disabled")})}var s=this,n=s.$roomSlotInputs.index(t),c=n-s.maxSlots,l=n+s.maxSlots;if(0===s.selectedSlotInputs.length&&i(),1===s.selectedSlotInputs.length&&(e(t).parent(".ccl-c-room__slot").hasClass("ccl-is-disabled")?o.preventDefault():e(".ccl-c-room__slot").removeClass("ccl-is-disabled")),s.selectedSlotInputs.length>=2){if(s.selectedSlotInputs.indexOf(t)<0)s.clearAllSlots(),s.selectedSlotInputs=[];else{o.preventDefault();var a=s.selectedSlotInputs.indexOf(t);e.extend([],s.selectedSlotInputs).forEach(function(t,e){a!=e&&s.clearSlot(t)}),s.setCurrentDurationText()}i()}},s.prototype.onSlotChange=function(t){if(e(t).prop("checked"))this.selectedSlotInputs.push(t),e(t).parent(".ccl-c-room__slot").addClass("ccl-is-checked");else{var o=this.selectedSlotInputs.indexOf(t);o>-1&&this.selectedSlotInputs.splice(o,1),e(t).parent(".ccl-c-room__slot").removeClass("ccl-is-checked")}if(this.selectedSlotInputs.length>0?this.$resetSelectionBtn.show():this.$resetSelectionBtn.hide(),2===this.selectedSlotInputs.length){var i=this;i.$el.find(".ccl-is-checked").first().nextUntil(".ccl-is-checked").each(function(t,o){var s=e(o).find('input[type="checkbox"]');i.selectedSlotInputs.push(s[0]),i.activateSlot(o)})}this.setCurrentDurationText()},s.prototype.clearSlot=function(t){var o;if(e(t).is('[type="checkbox"]'))e(t).prop("checked",!1).parent(".ccl-c-room__slot").removeClass("ccl-is-checked ccl-has-potential"),o=this.selectedSlotInputs.indexOf(t);else{var i=e(t).find('[type="checkbox"]');e(t).removeClass("ccl-is-checked ccl-has-potential"),i.prop("checked",!1),o=this.selectedSlotInputs.indexOf(i[0])}this.selectedSlotInputs.splice(o,1)},s.prototype.clearAllSlots=function(){var t=this,o=e.extend([],t.selectedSlotInputs);e(o).each(function(e,o){t.clearSlot(o)})},s.prototype.activateSlot=function(t){var o=e(t).is('[type="checkbox"]'),i=o?e(t).parent(".ccl-c-room__slot"):e(t);i.hasClass("ccl-is-occupied")||(e(t).is('[type="checkbox"]')?(e(t).prop("checked",!0),i.addClass("ccl-is-checked")):i.addClass("ccl-is-checked").find('[type="checkbox"]').prop("checked",!0))},s.prototype.setCurrentDurationText=function(){var t=e.extend([],this.selectedSlotInputs),o=t.sort(function(t,e){return t.value>e.value}),i=o.length;if(i>0){var s=o[0].value.slice(0,-4),n=this.formatDateString(new Date(s),"readable"),c=i>=2?o[o.length-1].value.slice(0,-4):s,l=new Date(c).getTime()+60*this.slotMinutes*1e3,a=this.formatDateString(new Date(l),"readable");this.$currentDurationText.text(n+" to "+a)}else this.$currentDurationText.text("None")},s.prototype.setMaxTimeText=function(){var t,e=this.maxSlots*this.slotMinutes;switch(e){case 240:case 180:case 120:case 60:t=e/60+" hours";break;default:t=e+"mins"}this.$maxTime.text(t)},s.prototype.formatDateString=function(t,e){var o=t.getMinutes().toString().length<2?"0"+t.getMinutes().toString():t.getMinutes().toString();if(e){var i=t.getHours()>=12?"p":"a";return(t.getHours()>12?t.getHours()-12:t.getHours())+":"+o+i}var s=t.getHours().toString().length<2?"0"+t.getHours().toString():t.getHours().toString(),n=t.getSeconds().toString().length<2?"0"+t.getSeconds().toString():t.getSeconds().toString();return this.dateYmd+"T"+s+":"+o+":"+n+this.timeZone},s.prototype.onSubmit=function(){function t(t){var i,s=JSON.parse(t);s.booking_id?i=['<p class="ccl-h2 ccl-u-mt-0">Success!</p>','<p class="ccl-h4">Your booking ID is <span class="ccl-u-color-school">'+s.booking_id+"</span></p>",'<p class="ccl-h4">Please check your email to confirm your booking.</p>']:(i=['<p class="ccl-h3 ccl-u-mt-0">Sorry, but we couldn\'t process your reservation.</p>','<p class="ccl-h4">Errors:</p>'],e(s.errors).each(function(t,e){i.push('<p class="ccl-c-alert ccl-is-error">'+e+"</p>")}),i.push('<p class="ccl-h4">Please talk to your nearest librarian for help.</p>')),o.$formCancel.prop("disabled",!1).text("Close"),o.$formSubmit.remove(),o.$formContent.animate({opacity:0},CCL.DURATION),o.$formResponse.delay(CCL.DURATION).animate({opacity:1},CCL.DURATION).html(i),o.$formContent.delay(CCL.DURATION).animate({height:o.$formResponse.height()+"px"},CCL.DURATION).css({zIndex:"-1"})}var o=this,i={iid:333,start:this.selectedSlotInputs[0].value,fname:this.$el[0].fname.value,lname:this.$el[0].lname.value,email:this.$el[0].email.value,nickname:this.$el[0].nickname.value,bookings:[{id:this.roomId,to:this.dateYmd+"T15:00:00"+this.timeZone}]};console.log("onSubmit » ",i),this.$el.addClass("ccl-is-loading"),this.$formCancel.prop("disabled",!0),this.$formSubmit.text("Sending...").prop("disabled",!0);var s={action:"request_booking",ccl_nonce:CCL.nonce,payload:i};e.post({url:CCL.ajax_url,data:s}).done(function(e){t(e)}).fail(function(t){console.log(t)}).always(function(){o.$el.removeClass("ccl-is-loading")})},e(o).ready(function(){e(".js-room-res-form").each(function(){new s(this)})})}(this,jQuery),function(t,e){"use strict";var o=t.document,i=e(t),s={isFixed:"ccl-is-fixed"},n=function(t){function o(){i.scrollTop()+a.offset>=l.top?n.addClass(s.isFixed):n.removeClass(s.isFixed)}var n=e(t),c=n.outerHeight(),l=n.offset(),a=n.data("sticky"),r=e('<div class="js-sticky-wrapper"></div>').css({height:c+"px"}),h={offset:0};return a=e.extend(h,a),n.wrap(r),i.scroll(CCL.throttle(o,100)),this};e(o).ready(function(){e(".js-is-sticky").each(function(){new n(this)})})}(this,jQuery),function(t,e){"use strict";var o=t.document,i=e("html").data("school"),s=function(t){this.$select=e(t),this.init()};s.prototype.init=function(){i&&this.$select.find('option[value="'+i+'"]').attr("selected","selected"),this.$select.change(function(t){e("html").attr("data-school",t.target.value)})},e(o).ready(function(){e('[data-toggle="school"]').each(function(){new s(this)})})}(this,jQuery),function(t,e){"use strict";var o=t.document,i=function(t){this.$el=e(t),this.content=this.$el.attr("title"),this.$tooltip=e('<div id="ccl-current-tooltip" class="ccl-c-tooltip ccl-is-top" role="tooltip"><div class="ccl-c-tooltip__arrow"></div><div class="ccl-c-tooltip__inner">'+this.content+"</div></div>"),this.init()};i.prototype.init=function(){var t=this;this.$el.hover(function(e){t.$el.attr("title",""),t.$el.attr("aria-describedby","ccl-current-tooltip"),t.$tooltip.appendTo(o.body),CCL.reflow(t.$tooltip[0]);var i=t.$el.offset(),s=t.$el.outerWidth(),n=t.$tooltip.outerHeight();t.$tooltip.css({top:i.top-n+"px",left:i.left+s/2+"px"}),t.$tooltip.addClass("ccl-is-shown")},function(e){t.$el.attr("title",t.content),t.$el.attr("aria-describedby",""),t.$tooltip.removeClass("ccl-is-shown"),t.$tooltip.remove()})},e(o).ready(function(){e('[data-toggle="tooltip"]').each(function(){new i(this)})})}(this,jQuery),function(t,e){"use strict";var o,i,s=t.document,n=function(t){var o=this;return this.$el=e(t),this.$tabs=this.$el.find(".ccl-c-tab"),this.$tabContents=e(".ccl-c-tab__content"),this.$tabs.each(function(){var t=e(this);t.click(function(e){e.preventDefault();var i=t.data("target");o.setActive(i)})}),this};n.prototype.setActive=function(t){this.$tabs.removeClass("ccl-is-active"),this.$tabs.filter('[href="'+t+'"]').addClass("ccl-is-active"),this.$tabContents.removeClass("ccl-is-active"),this.$tabContents.filter(t).addClass("ccl-is-active")};var c=function(t){this.$el=e(t),this.callNumbers={},this.$form=this.$el.find("#call-number-search"),this.$input=this.$el.find("#call-num-input"),this.$submit=this.$el.find("#call-num-submit"),this.$marquee=this.$el.find(".ccl-c-wayfinder__marquee"),this.$callNum=this.$el.find(".ccl-c-wayfinder__call-num"),this.$wing=this.$el.find(".ccl-c-wayfinder__wing"),this.$floor=this.$el.find(".ccl-c-wayfinder__floor"),this.$subject=this.$el.find(".ccl-c-wayfinder__subject"),this.error={get:'<div class="ccl-c-alert ccl-is-error ccl-wayfinder__error"><button type="button" class="ccl-b-close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">×</span></button><i class="ccl-b-icon-alert" aria-hidden="true"></i> There was an error fetching call numbers.</div>',find:'<div class="ccl-c-alert ccl-is-error ccl-wayfinder__error"><button type="button" class="ccl-b-close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">×</span></button><i class="ccl-b-icon-alert" aria-hidden="true"></i> Could not find that call number. Please try again.</div>'},this.$errorBox=e(".ccl-error-box");var o=this;return e.getJSON(CCL.assets+"js/call-numbers.json").done(function(t){o.callNumbers=t,o.init()}).fail(function(t){console.log(t),this.$errorBox.append(this.error.get)}),this};c.prototype.init=function(){var t=this;this.$el.addClass("ccl-app-active"),this.$input.keyup(function(){""===e(this).val()?(t.$submit.attr("disabled",!0),t.$marquee.hide(),t.reset()):t.$submit.attr("disabled",!1)}),this.$form.submit(function(o){o.preventDefault();var i=t.$input.val();e(".ccl-wayfinder__error").remove(),t.$marquee.show(),t.$callNum.text(i),t.findRoom(i)})},c.prototype.getCallKey=function(t){var e,o=Object.keys(this.callNumbers);if(0!==o.length)return o.forEach(function(o){t>=o&&(e=o)}),e},c.prototype.findRoom=function(t){t=t.toUpperCase();var i,s=this.getCallKey(t),n={};if(!s)return void this.throwFindError();e("html, body").animate({scrollTop:e(".ccl-c-search").offset().top}),n=this.callNumbers[s],this.$floor.text(n.floor),this.$wing.text(n.wing),this.$subject.text(n.subject),i=n.floor_int,this.$el.find('a[href="#floor-'+i+'"]').addClass("ccl-is-active"),this.$el.find("#room-"+i+"-1").addClass("ccl-is-active"),o.setActive("#floor-"+i)},c.prototype.reset=function(){this.$el.find('a[href*="#floor-"]').removeClass("ccl-is-active"),this.$el.find(".ccl-c-floor__room").removeClass("ccl-is-active")},c.prototype.throwFindError=function(){this.$el.find('a[href*="#floor-"]').removeClass("ccl-is-active"),this.$el.find(".ccl-c-floor__room").removeClass("ccl-is-active"),this.$floor.text(""),this.$wing.text(""),this.$subject.text(""),this.$errorBox.append(this.error.find)},e(s).ready(function(){e(".ccl-js-tabs").each(function(){o=new n(this)}),e(".ccl-js-wayfinder").each(function(){i=new c(this)})})}(this,jQuery);